<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Internal Visual Acuity Functions — vainternal • JWileymisc</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Internal Visual Acuity Functions — vainternal" />
<meta property="og:description" content="This function is one of several designed to help convert measures of
visual acuity recorded typically recorded as Snellen fractions
(e.g., 20/20 sees at 20 feet what is &quot;typically&quot; seen at 20 feet.
20/40 sees at 20 feet what is &quot;typically&quot; seen at 40 feet, etc.)
into statistically usable data.  It can also parse text data
for Counting Fingers (CF) and Hand Motion (HM)  and convert them to
approximate logMAR values.
This is an internal function and is not  meant to be
called directly." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">JWileymisc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/diagnostics-vignette.html">Diagnostics</a>
    </li>
    <li>
      <a href="../articles/exploratory-vignette.html">Exploratory and Descriptive Statistics and Plots</a>
    </li>
    <li>
      <a href="../articles/model-test-vignette.html">Model Performance and Tests</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/JWiley/JWileymisc">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Internal Visual Acuity Functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/JWiley/JWileymisc/blob/master/R/visual_acuity.R'><code>R/visual_acuity.R</code></a></small>
    <div class="hidden name"><code>vainternal.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is one of several designed to help convert measures of
visual acuity recorded typically recorded as Snellen fractions
(e.g., 20/20 sees at 20 feet what is "typically" seen at 20 feet.
20/40 sees at 20 feet what is "typically" seen at 40 feet, etc.)
into statistically usable data.  It can also parse text data
for Counting Fingers (CF) and Hand Motion (HM)  and convert them to
approximate logMAR values.
This is an internal function and is not  meant to be
called directly.</p>
    </div>

    <pre class="usage"><span class='fu'>logmar</span>(<span class='no'>x</span>, <span class='kw'>snell.numerator</span> <span class='kw'>=</span> <span class='fl'>20</span>, <span class='kw'>inverse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>CFHM</span>(<span class='no'>x</span>, <span class='no'>zero</span>)

<span class='fu'>snellen</span>(<span class='no'>snellenvalue</span>, <span class='no'>chart.values</span>, <span class='no'>chart.nletters</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Character data of the form: &#8220;CF 10&#8221;, &#8220;HM 12&#8221;,
&#8220;HM&#8221;, &#8220;CF&#8221;, &#8220;CF 2&#8221;, etc. to be converted to
logMAR values.</p></td>
    </tr>
    <tr>
      <th>snell.numerator</th>
      <td><p>The numerator of a Snellen fraction.
It defaults to 20 (the most common one).</p></td>
    </tr>
    <tr>
      <th>inverse</th>
      <td><p><code>inverse</code> = FALSE by default.  If TRUE,
<code>logmar</code> will assume <code>x</code> is a logMAR value, and
calculate the denominator of a Snellen fraction using the
<code>snell.numerator</code> as the numerator.</p></td>
    </tr>
    <tr>
      <th>zero</th>
      <td><p>A &#8220;zero&#8221; logMAR value to be used for any CF or HM
value missing a number.  May be an actual number or simply <code>NA</code></p></td>
    </tr>
    <tr>
      <th>snellenvalue</th>
      <td><p>The observed snellen values</p></td>
    </tr>
    <tr>
      <th>chart.values</th>
      <td><p>The chart snellen values</p></td>
    </tr>
    <tr>
      <th>chart.nletters</th>
      <td><p>The number of letters per chart line</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This treats CF as approximately 200 letters (per Holladay), so
CF at 10 feet has Snellen value "equivalent" of 10/200. HM is
approximately 10 times worse, so HM at 10 feet approximately
10/2000.  After conversion, rough equivalents are passed to
<code>logmar</code> to actually be converted.
Other functions are responsible for suitably parsing the text and
passing numbers to <code>logmar</code>. If <code>inverse = FALSE</code> (the default),
<code>logmar</code> calculates \(-log_{10}(\frac{snell.numerator}{x})\).
If <code>TRUE</code>, then \(\frac{snell.numerator}{10^{-x}}\).</p>
<p>The <code>zero</code> argument is used to specify a "zero" logMAR value.
In particular, this is used when no distance information is given
(e.g., only "HM" or "CF" as opposed to "CF 6" or "HM 4").
For the reasioning and rational behind this, see the "Details"
section of <code><a href='VAConverter.html'>VAConverter</a></code>.</p>
<p>For the <code>snellen</code> function, the input should be character data
and have a numerator and denominator separated by '/'.  E.g.,
&#8220;20/20&#8221;, &#8220;20/40 + 3&#8221;.  This handles both simple
and Snellen values that need to be interpolated given the
appropriate chart.</p>
<p>logMAR calculations including interpolating partial lines.
Given &#8220;20/25 + 3&#8221;, calculate the logMAR of 20/25 and
20/20 (the next step up since '+'), and go 3/chart.nletters
of the way between these two values.  Similarly if
&#8220;20/20 - 3&#8221;, it will go partway between 20/25 and 20/30.
Note that it depends on the lines and letters per line
<em>on the actual chart used</em>. The <code>chart.values</code> and
<code>chart.nletters</code> should contain all the lines and number
of letters for the chart that was used.</p>
<p>These functions were written to deal
with a very specific style of recording visual acuity for a study I
worked on.  It may or may not have much use elsewhere.  <code>CFHM</code>
was not intended to typically be called by the user directly.
Generally, a higher level function, (e.g., <code>VAConverter</code>) would
be called.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Jack T. Holladay (2004).  Visual acuity measurements.
  <em>Journal of Cataract &amp; Refractive Surgery, 30</em>(2),
  pp. 287--290. DOI: 10.1016/j.jcrs.2004.01.014.
  <a href='http://dx.doi.org/10.1016/j.jcrs.2004.01.014'>http://dx.doi.org/10.1016/j.jcrs.2004.01.014</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='VAConverter.html'>VAConverter</a></code> the overall function typically
  called</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## logMAR value for "perfect" 20/20 vision</span>
<span class='kw pkg'>JWileymisc</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/JWileymisc/man/vainternal.html'>logmar</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>20</span>)</div><div class='output co'>#&gt; [1] 0</div><div class='input'>
<span class='co'>## Go to and from logMAR value, should return "20"</span>
<span class='co'>## there may be slight error due to floating point arithmetic</span>
<span class='kw pkg'>JWileymisc</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/JWileymisc/man/vainternal.html'>logmar</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='kw pkg'>JWileymisc</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/JWileymisc/man/vainternal.html'>logmar</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>20</span>), <span class='kw'>inverse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; [1] 20</div><div class='input'>
<span class='co'>## logMAR value for 20/40 vision</span>
<span class='kw pkg'>JWileymisc</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/JWileymisc/man/vainternal.html'>logmar</a></span>(<span class='fl'>40</span>)</div><div class='output co'>#&gt; [1] 0.30103</div><div class='input'><span class='co'>## logMAR approximations, note "HM" is just the zero value</span>
<span class='kw pkg'>JWileymisc</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/JWileymisc/man/vainternal.html'>CFHM</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"HM 20"</span>, <span class='st'>"HM"</span>, <span class='st'>"CF 20"</span>, <span class='st'>"CF 12"</span>, <span class='st'>"CF"</span>), <span class='kw'>zero</span> <span class='kw'>=</span> <span class='fl'>3</span>)</div><div class='output co'>#&gt; [1] 2.000000 3.000000 1.000000 1.221849 3.000000</div><div class='input'><span class='co'>## In cases where there is insufficient data, rather than choose</span>
<span class='co'>## an arbitrary value, you can may just use NA</span>
<span class='kw pkg'>JWileymisc</span><span class='kw ns'>:::</span><span class='fu'><a href='https://rdrr.io/pkg/JWileymisc/man/vainternal.html'>CFHM</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"HM 20"</span>, <span class='st'>"HM"</span>, <span class='st'>"CF 20"</span>, <span class='st'>"CF 12"</span>, <span class='st'>"CF"</span>), <span class='kw'>zero</span> <span class='kw'>=</span> <span class='fl'>NA</span>)</div><div class='output co'>#&gt; [1] 2.000000       NA 1.000000 1.221849       NA</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joshua F. Wiley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


